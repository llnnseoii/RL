<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1307" id="srcline1307">1307</a></span><span class="line"><span class="comment">% display(sprintf('In RS-Study %d patients excluded due to Ca, %d due to Kolo, %d due to past polyps',<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1308" id="srcline1308">1308</a></span><span class="line"><span class="comment">%     AusschlussCa, AusschlussKolo, AusschlussPolyp)) </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1309" id="srcline1309">1309</a></span><span class="line"><span class="comment">% display(sprintf('In RS-examinations %d times polyps, %d times cancer and %d times polyps and cancer found',<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1310" id="srcline1310">1310</a></span><span class="line"><span class="comment">%     PosCa, PosPolyp, PosPolypCa))</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1311" id="srcline1311">1311</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1312" id="srcline1312">1312</a></span><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1313" id="srcline1313">1313</a></span><span class="line"><span class="comment">%%%         COLONOSCOPY                               %%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1314" id="srcline1314">1314</a></span><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1315" id="srcline1315">1315</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1316" id="srcline1316">1316</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1317" id="srcline1317">1317</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S123T46U7415">Polyp</span>, <span class="var type1" id="S124T48U7416">Ca</span>, <span class="var type1" id="S125T50U7417">Detected</span>, <span class="var type1" id="S126T44U7418">Included</span>, <span class="var type1" id="S127T2U7419">DeathCause</span>, <span class="var type1" id="S128T2U7420">DeathYear</span>,<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1318" id="srcline1318">1318</a></span><span class="line">    <span class="var type1" id="S129T8U7421">DiagnosedCancer</span>, <span class="var type1" id="S130T5U7422">AdvancedPolypsRemoved</span>, <span class="var type1" id="S131T5U7423">EarlyPolypsRemoved</span>,<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1319" id="srcline1319">1319</a></span><span class="line">    <span class="var type1" id="S132T3U7424">Last</span>, <span class="var type1" id="S133T6U7425">TumorRecord</span>, <span class="var type1" id="S134T10U7426">PaymentType</span>, <span class="var type1" id="S135T15U7427">Money</span>]<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1320" id="srcline1320">1320</a></span><span class="line">    = Colonoscopy(<span class="var type1" id="S136T1U7430">z</span>, <span class="var type1" id="S137T1U7431">y</span>, <span class="var type1" id="S138T1U7432">q</span>, <span class="var type2" id="S139T43V3U7433">Modus</span>, <span class="var type1" id="S140T2U7434">Gender</span>, <span class="var type1" id="S123T46U7435">Polyp</span>,<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1321" id="srcline1321">1321</a></span><span class="line">    <span class="var type1" id="S124T48U7436">Ca</span>, <span class="var type1" id="S125T50U7437">Detected</span>, <span class="var type1" id="S126T44U7438">Included</span>, <span class="var type1" id="S127T2U7439">DeathCause</span>, <span class="var type1" id="S128T2U7440">DeathYear</span>,<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1322" id="srcline1322">1322</a></span><span class="line">    <span class="var type1" id="S129T8U7441">DiagnosedCancer</span>, <span class="var type1" id="S130T5U7442">AdvancedPolypsRemoved</span>, <span class="var type1" id="S131T5U7443">EarlyPolypsRemoved</span>,<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1323" id="srcline1323">1323</a></span><span class="line">    <span class="var type1" id="S132T3U7444">Last</span>, <span class="var type1" id="S133T6U7445">TumorRecord</span>, <span class="var type1" id="S134T10U7446">PaymentType</span>, <span class="var type1" id="S135T15U7447">Money</span>,<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1324" id="srcline1324">1324</a></span><span class="line">    <span class="var type1" id="S141T19U7448">StageVariables</span>, <span class="var type1" id="S142T23U7449">Cost</span>, <span class="var type1" id="S143T21U7450">Location</span>, <span class="var type1" id="S144T26U7451">risc</span>, <span class="var type1" id="S145T62U7452">ColoReachMatrix</span>, <span class="var type1" id="S146T38U7453">MortalityMatrix</span>, <span class="var type1" id="S147T24U7454">CostStage</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,1325" id="srcline1325">1325</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1326" id="srcline1326">1326</a></span><span class="line"><span class="comment">% in this function we do a colonoscopy for the respective patient (number</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1327" id="srcline1327">1327</a></span><span class="line"><span class="comment">% z). We cure all detected polyps, and handle the case if a cancer was</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1328" id="srcline1328">1328</a></span><span class="line"><span class="comment">% detected</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1329" id="srcline1329">1329</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1330" id="srcline1330">1330</a></span><span class="line"><span class="comment">% we determine the reach of this colonoscopy (cecum = 1, rectum = 13))</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1331" id="srcline1331">1331</a></span><span class="line"><span class="mxinfo " id="T1:U39"><span class="var type1" id="S148T1U7457">CurrentReach</span> = <span class="mxinfo " id="T1:U41"><span class="var type1" id="S145T62U7459">ColoReachMatrix</span>(<span class="mxinfo " id="T1:U43">round(<span class="mxinfo " id="T1:U44"><span class="mxinfo " id="T1:U45"><span class="mxinfo " id="T1:U46">rand</span>*<span class="mxinfo " id="T1:U47">999</span></span>+<span class="mxinfo " id="T1:U48">1</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1332" id="srcline1332">1332</a></span><span class="line"><span class="mxinfo " id="T22:U49"><span class="var type1" id="S151T22U7470">CurrentReachMatrix</span> = <span class="mxinfo " id="T22:U51">zeros(<span class="mxinfo " id="T1:U52">1</span>, <span class="mxinfo " id="T1:U53">13</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1333" id="srcline1333">1333</a></span><span class="line"><span class="mxinfo " id="T65:U54"><span class="mxinfo " id="T65:U55"><span class="var type1" id="S151T22U7478">CurrentReachMatrix</span>(<span class="mxinfo " id="T66:U57"><span class="var type1" id="S148T1U7480">CurrentReach</span>:<span class="mxinfo " id="T1:U59">13</span></span>)</span> = <span class="mxinfo " id="T1:U60">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1334" id="srcline1334">1334</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1335" id="srcline1335">1335</a></span><span class="line"><span class="mxinfo " id="T1:U61"><span class="var type1" id="S153T1U7485">counter</span> = <span class="mxinfo " id="T1:U63">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1336" id="srcline1336">1336</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S154T1U7489">f</span>=<span class="mxinfo " id="T1:U65">length(<span class="mxinfo " id="T96:U66">find(<span class="mxinfo " id="T85:U67"><span class="mxinfo " id="T45:U68"><span class="var type1" id="S123T46U7498">Polyp</span>.Polyps</span>(<span class="var type1" id="S136T1U7500">z</span>, <span class="mxinfo " id="T86:U71">:</span>)</span>)</span>)</span> : <span class="mxinfo " id="T1:U72">-1</span> : <span class="mxinfo " id="T1:U73">1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1337" id="srcline1337">1337</a></span><span class="line">    <span class="mxinfo " id="T1:U74"><span class="var type1" id="S157T1U7507">Tumor</span> = <span class="mxinfo " id="T1:U76"><span class="mxinfo " id="T45:U77"><span class="var type1" id="S123T46U7510">Polyp</span>.Polyps</span>(<span class="var type1" id="S136T1U7512">z</span>, <span class="var type1" id="S154T1U7513">f</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1338" id="srcline1338">1338</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T28:U81">and(<span class="mxinfo " id="T28:U82"><span class="mxinfo " id="T1:U83">rand</span> &lt; <span class="mxinfo " id="T1:U84"><span class="mxinfo " id="T1:U85"><span class="mxinfo " id="T20:U86"><span class="var type1" id="S141T19U7524">StageVariables</span>.Colo_Detection</span>(<span class="var type1" id="S157T1U7526">Tumor</span>)</span> *<span class="keyword">...</span><span class="comment">    <span class="comment">% influence of polyp stage</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1339" id="srcline1339">1339</a></span><span class="line">            <span class="mxinfo " id="T1:U89"><span class="mxinfo " id="T22:U90"><span class="var type1" id="S143T21U7529">Location</span>.ColoDetection</span>(<span class="mxinfo " id="T1:U92"><span class="mxinfo " id="T45:U93"><span class="var type1" id="S123T46U7533">Polyp</span>.PolypLocation</span>(<span class="var type1" id="S136T1U7535">z</span>, <span class="var type1" id="S154T1U7536">f</span>)</span>)</span></span></span>,<span class="keyword">...</span><span class="comment">    <span class="comment">% influence of location on detection</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1340" id="srcline1340">1340</a></span><span class="line">            <span class="mxinfo " id="T28:U97"><span class="mxinfo " id="T1:U98"><span class="var type1" id="S151T22U7539">CurrentReachMatrix</span>(<span class="mxinfo " id="T1:U100"><span class="mxinfo " id="T45:U101"><span class="var type1" id="S123T46U7542">Polyp</span>.PolypLocation</span>(<span class="var type1" id="S136T1U7544">z</span>, <span class="var type1" id="S154T1U7545">f</span>)</span>)</span> == <span class="mxinfo " id="T1:U105">1</span></span>)</span>      <span class="comment">% has current current colonoscopy reached location of polyp?</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1341" id="srcline1341">1341</a></span><span class="line">        <span class="comment">% we delete the current polyp</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1342" id="srcline1342">1342</a></span><span class="line">        <span class="mxinfo " id="T1:U106"><span class="var type1" id="S159T1U7549">l</span> = <span class="mxinfo " id="T96:U108">length(<span class="mxinfo " id="T96:U109">find(<span class="mxinfo " id="T85:U110"><span class="mxinfo " id="T45:U111"><span class="var type1" id="S123T46U7556">Polyp</span>.Polyps</span>(<span class="var type1" id="S136T1U7558">z</span>, <span class="mxinfo " id="T86:U114">:</span>)</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1343" id="srcline1343">1343</a></span><span class="line">        <span class="mxinfo " id="T96:U115"><span class="mxinfo " id="T96:U116"><span class="mxinfo " id="T45:U117"><span class="var type1" id="S123T46U7564">Polyp</span>.Polyps</span>(<span class="var type1" id="S136T1U7566">z</span>, <span class="mxinfo " id="T97:U120"><span class="var type1" id="S154T1U7568">f</span>:<span class="var type1" id="S159T1U7569">l</span></span>)</span>           = <span class="mxinfo " id="T96:U123"><span class="mxinfo " id="T45:U124"><span class="var type1" id="S123T46U7572">Polyp</span>.Polyps</span>(<span class="var type1" id="S136T1U7574">z</span>, <span class="mxinfo " id="T97:U127"><span class="mxinfo " id="T1:U128"><span class="var type1" id="S154T1U7577">f</span>+<span class="mxinfo " id="T1:U130">1</span></span>:<span class="mxinfo " id="T1:U131"><span class="var type1" id="S159T1U7580">l</span>+<span class="mxinfo " id="T1:U133">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1344" id="srcline1344">1344</a></span><span class="line">        <span class="mxinfo " id="T96:U134"><span class="mxinfo " id="T96:U135"><span class="mxinfo " id="T45:U136"><span class="var type1" id="S123T46U7586">Polyp</span>.PolypYear</span>(<span class="var type1" id="S136T1U7588">z</span>, <span class="mxinfo " id="T97:U139"><span class="var type1" id="S154T1U7590">f</span>:<span class="var type1" id="S159T1U7591">l</span></span>)</span>        = <span class="mxinfo " id="T96:U142"><span class="mxinfo " id="T45:U143"><span class="var type1" id="S123T46U7594">Polyp</span>.PolypYear</span>(<span class="var type1" id="S136T1U7596">z</span>, <span class="mxinfo " id="T97:U146"><span class="mxinfo " id="T1:U147"><span class="var type1" id="S154T1U7599">f</span>+<span class="mxinfo " id="T1:U149">1</span></span>:<span class="mxinfo " id="T1:U150"><span class="var type1" id="S159T1U7602">l</span>+<span class="mxinfo " id="T1:U152">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1345" id="srcline1345">1345</a></span><span class="line">        <span class="mxinfo " id="T96:U153"><span class="mxinfo " id="T96:U154"><span class="mxinfo " id="T45:U155"><span class="var type1" id="S123T46U7608">Polyp</span>.PolypLocation</span>(<span class="var type1" id="S136T1U7610">z</span>, <span class="mxinfo " id="T97:U158"><span class="var type1" id="S154T1U7612">f</span>:<span class="var type1" id="S159T1U7613">l</span></span>)</span>    = <span class="mxinfo " id="T96:U161"><span class="mxinfo " id="T45:U162"><span class="var type1" id="S123T46U7616">Polyp</span>.PolypLocation</span>(<span class="var type1" id="S136T1U7618">z</span>, <span class="mxinfo " id="T97:U165"><span class="mxinfo " id="T1:U166"><span class="var type1" id="S154T1U7621">f</span>+<span class="mxinfo " id="T1:U168">1</span></span>:<span class="mxinfo " id="T1:U169"><span class="var type1" id="S159T1U7624">l</span>+<span class="mxinfo " id="T1:U171">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1346" id="srcline1346">1346</a></span><span class="line">        <span class="mxinfo " id="T96:U172"><span class="mxinfo " id="T96:U173"><span class="mxinfo " id="T45:U174"><span class="var type1" id="S123T46U7630">Polyp</span>.EarlyProgression</span>(<span class="var type1" id="S136T1U7632">z</span>, <span class="mxinfo " id="T97:U177"><span class="var type1" id="S154T1U7634">f</span>:<span class="var type1" id="S159T1U7635">l</span></span>)</span> = <span class="mxinfo " id="T96:U180"><span class="mxinfo " id="T45:U181"><span class="var type1" id="S123T46U7638">Polyp</span>.EarlyProgression</span>(<span class="var type1" id="S136T1U7640">z</span>, <span class="mxinfo " id="T97:U184"><span class="mxinfo " id="T1:U185"><span class="var type1" id="S154T1U7643">f</span>+<span class="mxinfo " id="T1:U187">1</span></span>:<span class="mxinfo " id="T1:U188"><span class="var type1" id="S159T1U7646">l</span>+<span class="mxinfo " id="T1:U190">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1347" id="srcline1347">1347</a></span><span class="line">        <span class="mxinfo " id="T96:U191"><span class="mxinfo " id="T96:U192"><span class="mxinfo " id="T45:U193"><span class="var type1" id="S123T46U7652">Polyp</span>.AdvProgression</span>(<span class="var type1" id="S136T1U7654">z</span>, <span class="mxinfo " id="T97:U196"><span class="var type1" id="S154T1U7656">f</span>:<span class="var type1" id="S159T1U7657">l</span></span>)</span>   = <span class="mxinfo " id="T96:U199"><span class="mxinfo " id="T45:U200"><span class="var type1" id="S123T46U7660">Polyp</span>.AdvProgression</span>(<span class="var type1" id="S136T1U7662">z</span>, <span class="mxinfo " id="T97:U203"><span class="mxinfo " id="T1:U204"><span class="var type1" id="S154T1U7665">f</span>+<span class="mxinfo " id="T1:U206">1</span></span>:<span class="mxinfo " id="T1:U207"><span class="var type1" id="S159T1U7668">l</span>+<span class="mxinfo " id="T1:U209">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1348" id="srcline1348">1348</a></span><span class="line">        <span class="mxinfo " id="T1:U210"><span class="var type1" id="S153T1U7672">counter</span> = <span class="mxinfo " id="T1:U212"><span class="var type1" id="S153T1U7674">counter</span> + <span class="mxinfo " id="T1:U214">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1349" id="srcline1349">1349</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T28:U215"><span class="var type1" id="S157T1U7679">Tumor</span> &gt; <span class="mxinfo " id="T1:U217">4</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1350" id="srcline1350">1350</a></span><span class="line">            <span class="mxinfo " id="T1:U218"><span class="mxinfo " id="T1:U219"><span class="var type1" id="S130T5U7684">AdvancedPolypsRemoved</span>(<span class="var type1" id="S137T1U7685">y</span>)</span> = <span class="mxinfo " id="T1:U222"><span class="mxinfo " id="T1:U223"><span class="var type1" id="S130T5U7688">AdvancedPolypsRemoved</span>(<span class="var type1" id="S137T1U7689">y</span>)</span>+<span class="mxinfo " id="T1:U226">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1351" id="srcline1351">1351</a></span><span class="line">            <span class="mxinfo " id="T1:U227"><span class="mxinfo " id="T1:U228"><span class="mxinfo " id="T2:U229"><span class="var type1" id="S132T3U7695">Last</span>.AdvPolyp</span>(<span class="var type1" id="S136T1U7697">z</span>)</span> = <span class="var type1" id="S137T1U7698">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1352" id="srcline1352">1352</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1353" id="srcline1353">1353</a></span><span class="line">            <span class="mxinfo " id="T1:U233"><span class="mxinfo " id="T1:U234"><span class="mxinfo " id="T2:U235"><span class="var type1" id="S132T3U7704">Last</span>.Polyp</span>(<span class="var type1" id="S136T1U7706">z</span>)</span> = <span class="var type1" id="S137T1U7707">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1354" id="srcline1354">1354</a></span><span class="line">            <span class="mxinfo " id="T1:U239"><span class="mxinfo " id="T1:U240"><span class="var type1" id="S131T5U7711">EarlyPolypsRemoved</span>(<span class="var type1" id="S137T1U7712">y</span>)</span> = <span class="mxinfo " id="T1:U243"><span class="mxinfo " id="T1:U244"><span class="var type1" id="S131T5U7715">EarlyPolypsRemoved</span>(<span class="var type1" id="S137T1U7716">y</span>)</span> + <span class="mxinfo " id="T1:U247">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1355" id="srcline1355">1355</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1356" id="srcline1356">1356</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1357" id="srcline1357">1357</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1358" id="srcline1358">1358</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T28:U248"><span class="var type1" id="S153T1U7721">counter</span> &gt; <span class="mxinfo " id="T1:U250">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1359" id="srcline1359">1359</a></span><span class="line">    <span class="mxinfo " id="T1:U251"><span class="mxinfo " id="T1:U252"><span class="mxinfo " id="T2:U253"><span class="var type1" id="S132T3U7727">Last</span>.AdvPolyp</span>(<span class="var type1" id="S136T1U7729">z</span>)</span> = <span class="var type1" id="S137T1U7730">y</span></span>; <span class="comment">% 3 polyps counts as an advanced polyp</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1360" id="srcline1360">1360</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1361" id="srcline1361">1361</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1362" id="srcline1362">1362</a></span><span class="line"><span class="mxinfo " id="T1:U257"><span class="var type1" id="S160T1U7733">StageTmp</span>    = <span class="mxinfo " id="T1:U259">0</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="1,1363" id="srcline1363">1363</a></span><span class="line"><span class="mxinfo " id="T1:U260"><span class="var type1" id="S161T1U7737">EStage</span>      = <span class="mxinfo " id="T1:U262">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1364" id="srcline1364">1364</a></span><span class="line"><span class="mxinfo " id="T1:U263"><span class="var type1" id="S162T1U7741">ELocation</span>   = <span class="mxinfo " id="T1:U265">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1365" id="srcline1365">1365</a></span><span class="line"><span class="mxinfo " id="T1:U266"><span class="var type1" id="S163T1U7745">ESojourn</span>    = <span class="mxinfo " id="T1:U268">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1366" id="srcline1366">1366</a></span><span class="line"><span class="mxinfo " id="T1:U269"><span class="var type1" id="S164T1U7749">EDwellTime</span>  = <span class="mxinfo " id="T1:U271">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1367" id="srcline1367">1367</a></span><span class="line"><span class="mxinfo " id="T1:U272"><span class="var type1" id="S165T1U7753">LocationTmp</span> = <span class="mxinfo " id="T1:U274">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1368" id="srcline1368">1368</a></span><span class="line"><span class="mxinfo " id="T1:U275"><span class="var type1" id="S166T1U7757">SojournTmp</span>  = <span class="mxinfo " id="T1:U277">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1369" id="srcline1369">1369</a></span><span class="line"><span class="mxinfo " id="T1:U278"><span class="var type1" id="S167T1U7761">DwellTimeTmp</span>  = <span class="mxinfo " id="T1:U280">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1370" id="srcline1370">1370</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1371" id="srcline1371">1371</a></span><span class="line"><span class="mxinfo " id="T1:U281"><span class="var type1" id="S168T1U7765">m</span> = <span class="mxinfo " id="T1:U283">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1372" id="srcline1372">1372</a></span><span class="line"><span class="keyword">switch</span> <span class="var type1" id="S139T43U7768">Modus</span>  <span class="comment">%m2 moved the switch statement up. otherwise without cancer m remains 0</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1373" id="srcline1373">1373</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'Scre'</span> <span class="comment">% Screening</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1374" id="srcline1374">1374</a></span><span class="line">        <span class="var type0" id="S168T0U7773">m</span>=1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1375" id="srcline1375">1375</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'Symp'</span> <span class="comment">% Symptoms</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1376" id="srcline1376">1376</a></span><span class="line">        <span class="mxinfo " id="T1:U285"><span class="var type1" id="S168T1U7779">m</span>=<span class="mxinfo " id="T1:U287">2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1377" id="srcline1377">1377</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'Foll'</span> <span class="comment">% Follow-up</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1378" id="srcline1378">1378</a></span><span class="line">        <span class="var type0" id="S168T0U7785">m</span>=3;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1379" id="srcline1379">1379</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'Base'</span> <span class="comment">% Baseline</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1380" id="srcline1380">1380</a></span><span class="line">        <span class="var type0" id="S168T0U7791">m</span>=4;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1381" id="srcline1381">1381</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1382" id="srcline1382">1382</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1383" id="srcline1383">1383</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S154T1U7795">f</span>=<span class="mxinfo " id="T1:U289">length(<span class="mxinfo " id="T87:U290">find(<span class="mxinfo " id="T73:U291"><span class="mxinfo " id="T47:U292"><span class="var type1" id="S124T48U7804">Ca</span>.Cancer</span>(<span class="var type1" id="S136T1U7806">z</span>, <span class="mxinfo " id="T76:U295">:</span>)</span>)</span>)</span> : <span class="mxinfo " id="T1:U296">-1</span> : <span class="mxinfo " id="T1:U297">1</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1384" id="srcline1384">1384</a></span><span class="line">    <span class="mxinfo " id="T1:U298"><span class="var type1" id="S157T1U7813">Tumor</span> = <span class="mxinfo " id="T1:U300"><span class="mxinfo " id="T47:U301"><span class="var type1" id="S124T48U7816">Ca</span>.Cancer</span>(<span class="var type1" id="S136T1U7818">z</span>, <span class="var type1" id="S154T1U7819">f</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1385" id="srcline1385">1385</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T28:U305">and(<span class="mxinfo " id="T28:U306"><span class="mxinfo " id="T1:U307">rand</span> &lt; <span class="mxinfo " id="T1:U308"><span class="mxinfo " id="T20:U309"><span class="var type1" id="S141T19U7829">StageVariables</span>.Colo_Detection</span>(<span class="var type1" id="S157T1U7831">Tumor</span>)</span></span>,<span class="keyword">...</span><span class="comment">        <span class="comment">% influence of cancer stage on detection</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1386" id="srcline1386">1386</a></span><span class="line">            <span class="mxinfo " id="T28:U312"><span class="mxinfo " id="T1:U313"><span class="var type1" id="S151T22U7834">CurrentReachMatrix</span>(<span class="mxinfo " id="T1:U315"><span class="mxinfo " id="T47:U316"><span class="var type1" id="S124T48U7837">Ca</span>.CancerLocation</span>(<span class="var type1" id="S136T1U7839">z</span>, <span class="var type1" id="S154T1U7840">f</span>)</span>)</span> == <span class="mxinfo " id="T1:U320">1</span></span>)</span>        <span class="comment">% has current current colonoscopy reached location of polyp?</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1387" id="srcline1387">1387</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,1388" id="srcline1388">1388</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T28:U321">isequal(<span class="var type1" id="S153T1U7846">counter</span>, <span class="mxinfo " id="T1:U323">0</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1389" id="srcline1389">1389</a></span><span class="line">            <span class="mxinfo " id="T1:U324"><span class="var type1" id="S153T1U7850">counter</span> = <span class="mxinfo " id="T1:U326">-<span class="mxinfo " id="T1:U327">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1390" id="srcline1390">1390</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1391" id="srcline1391">1391</a></span><span class="line">        <span class="comment">% the cancer is now a detected cancer</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1392" id="srcline1392">1392</a></span><span class="line">        <span class="mxinfo " id="T1:U328"><span class="var type1" id="S170T1U7855">pos</span> = <span class="mxinfo " id="T1:U330"><span class="mxinfo " id="T84:U331">length(<span class="mxinfo " id="T84:U332">find(<span class="mxinfo " id="T81:U333"><span class="mxinfo " id="T49:U334"><span class="var type1" id="S125T50U7863">Detected</span>.Cancer</span>(<span class="var type1" id="S136T1U7865">z</span>, <span class="mxinfo " id="T82:U337">:</span>)</span>)</span>)</span>+<span class="mxinfo " id="T1:U338">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1393" id="srcline1393">1393</a></span><span class="line">        <span class="mxinfo " id="T1:U339"><span class="mxinfo " id="T1:U340"><span class="mxinfo " id="T49:U341"><span class="var type1" id="S125T50U7872">Detected</span>.Cancer</span>(<span class="var type1" id="S136T1U7874">z</span>, <span class="var type1" id="S170T1U7875">pos</span>)</span>         = <span class="mxinfo " id="T1:U345"><span class="mxinfo " id="T47:U346"><span class="var type1" id="S124T48U7878">Ca</span>.Cancer</span>(<span class="var type1" id="S136T1U7880">z</span>, <span class="var type1" id="S154T1U7881">f</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1394" id="srcline1394">1394</a></span><span class="line">        <span class="mxinfo " id="T1:U350"><span class="mxinfo " id="T1:U351"><span class="mxinfo " id="T49:U352"><span class="var type1" id="S125T50U7886">Detected</span>.CancerYear</span>(<span class="var type1" id="S136T1U7888">z</span>, <span class="var type1" id="S170T1U7889">pos</span>)</span>     = <span class="mxinfo " id="T1:U356"><span class="var type1" id="S137T1U7891">y</span>+<span class="mxinfo " id="T1:U358">(<span class="mxinfo " id="T1:U359"><span class="var type1" id="S138T1U7895">q</span>-<span class="mxinfo " id="T1:U361">1</span></span>)/<span class="mxinfo " id="T1:U362">4</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1395" id="srcline1395">1395</a></span><span class="line">        <span class="mxinfo " id="T1:U363"><span class="mxinfo " id="T1:U364"><span class="mxinfo " id="T49:U365"><span class="var type1" id="S125T50U7902">Detected</span>.CancerLocation</span>(<span class="var type1" id="S136T1U7904">z</span>, <span class="var type1" id="S170T1U7905">pos</span>)</span> = <span class="mxinfo " id="T1:U369"><span class="mxinfo " id="T47:U370"><span class="var type1" id="S124T48U7908">Ca</span>.CancerLocation</span>(<span class="var type1" id="S136T1U7910">z</span>, <span class="var type1" id="S154T1U7911">f</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1396" id="srcline1396">1396</a></span><span class="line">        <span class="mxinfo " id="T1:U374"><span class="mxinfo " id="T1:U375"><span class="mxinfo " id="T49:U376"><span class="var type1" id="S125T50U7916">Detected</span>.MortTime</span>(<span class="var type1" id="S136T1U7918">z</span>, <span class="var type1" id="S170T1U7919">pos</span>)</span>       = <span class="mxinfo " id="T1:U380"><span class="var type1" id="S146T38U7921">MortalityMatrix</span>(<span class="mxinfo " id="T1:U382"><span class="mxinfo " id="T1:U383"><span class="mxinfo " id="T47:U384"><span class="var type1" id="S124T48U7925">Ca</span>.Cancer</span>(<span class="var type1" id="S136T1U7927">z</span>, <span class="var type1" id="S154T1U7928">f</span>)</span>-<span class="mxinfo " id="T1:U388">6</span></span>, <span class="var type1" id="S137T1U7930">y</span>, <span class="mxinfo " id="T1:U390">round(<span class="mxinfo " id="T1:U391"><span class="mxinfo " id="T1:U392"><span class="mxinfo " id="T1:U393">rand</span>*<span class="mxinfo " id="T1:U394">999</span></span>+<span class="mxinfo " id="T1:U395">1</span></span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1397" id="srcline1397">1397</a></span><span class="line">        <span class="comment">% dfisplay(sprintf('cancer stage %d mortality %d months', Detected.Cancer(z, pos), Detected.MortTime(z, pos)))</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1398" id="srcline1398">1398</a></span><span class="line">        <span class="comment">% we need keep track of key parameters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1399" id="srcline1399">1399</a></span><span class="line">        <span class="comment">% Stage Location SojournTime Sex DetectionMode</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1400" id="srcline1400">1400</a></span><span class="line">        <span class="mxinfo " id="T1:U396"><span class="var type1" id="S160T1U7941">StageTmp</span>    = <span class="var type1" id="S157T1U7942">Tumor</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1401" id="srcline1401">1401</a></span><span class="line">        <span class="mxinfo " id="T1:U399"><span class="var type1" id="S165T1U7945">LocationTmp</span> = <span class="mxinfo " id="T1:U401"><span class="mxinfo " id="T47:U402"><span class="var type1" id="S124T48U7948">Ca</span>.CancerLocation</span>(<span class="var type1" id="S136T1U7950">z</span>, <span class="var type1" id="S154T1U7951">f</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1402" id="srcline1402">1402</a></span><span class="line">        <span class="mxinfo " id="T1:U406"><span class="var type1" id="S166T1U7954">SojournTmp</span>  = <span class="mxinfo " id="T1:U408"><span class="mxinfo " id="T1:U409"><span class="var type1" id="S137T1U7957">y</span> + <span class="mxinfo " id="T1:U411">(<span class="mxinfo " id="T1:U412"><span class="var type1" id="S138T1U7961">q</span>-<span class="mxinfo " id="T1:U414">1</span></span>)/<span class="mxinfo " id="T1:U415">4</span></span></span> - <span class="mxinfo " id="T1:U416"><span class="mxinfo " id="T47:U417"><span class="var type1" id="S124T48U7966">Ca</span>.CancerYear</span>(<span class="var type1" id="S136T1U7968">z</span>, <span class="var type1" id="S154T1U7969">f</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1403" id="srcline1403">1403</a></span><span class="line">        <span class="mxinfo " id="T1:U421"><span class="var type1" id="S167T1U7972">DwellTimeTmp</span>   = <span class="mxinfo " id="T1:U423"><span class="mxinfo " id="T47:U424"><span class="var type1" id="S124T48U7975">Ca</span>.DwellTime</span>(<span class="var type1" id="S136T1U7977">z</span>, <span class="var type1" id="S154T1U7978">f</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1404" id="srcline1404">1404</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,1405" id="srcline1405">1405</a></span><span class="line">        <span class="comment">% the original cancer is removed from the database</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1406" id="srcline1406">1406</a></span><span class="line">        <span class="mxinfo " id="T1:U428"><span class="var type1" id="S159T1U7981">l</span> = <span class="mxinfo " id="T87:U430">length(<span class="mxinfo " id="T87:U431">find(<span class="mxinfo " id="T73:U432"><span class="mxinfo " id="T47:U433"><span class="var type1" id="S124T48U7988">Ca</span>.Cancer</span>(<span class="var type1" id="S136T1U7990">z</span>, <span class="mxinfo " id="T76:U436">:</span>)</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1407" id="srcline1407">1407</a></span><span class="line">        <span class="mxinfo " id="T87:U437"><span class="mxinfo " id="T87:U438"><span class="mxinfo " id="T47:U439"><span class="var type1" id="S124T48U7996">Ca</span>.Cancer</span>(<span class="var type1" id="S136T1U7998">z</span>, <span class="mxinfo " id="T79:U442"><span class="var type1" id="S154T1U8000">f</span>:<span class="var type1" id="S159T1U8001">l</span></span>)</span>         = <span class="mxinfo " id="T87:U445"><span class="mxinfo " id="T47:U446"><span class="var type1" id="S124T48U8004">Ca</span>.Cancer</span>(<span class="var type1" id="S136T1U8006">z</span>, <span class="mxinfo " id="T79:U449"><span class="mxinfo " id="T1:U450"><span class="var type1" id="S154T1U8009">f</span>+<span class="mxinfo " id="T1:U452">1</span></span>:<span class="mxinfo " id="T1:U453"><span class="var type1" id="S159T1U8012">l</span>+<span class="mxinfo " id="T1:U455">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1408" id="srcline1408">1408</a></span><span class="line">        <span class="mxinfo " id="T87:U456"><span class="mxinfo " id="T87:U457"><span class="mxinfo " id="T47:U458"><span class="var type1" id="S124T48U8018">Ca</span>.CancerYear</span>(<span class="var type1" id="S136T1U8020">z</span>, <span class="mxinfo " id="T79:U461"><span class="var type1" id="S154T1U8022">f</span>:<span class="var type1" id="S159T1U8023">l</span></span>)</span>     = <span class="mxinfo " id="T87:U464"><span class="mxinfo " id="T47:U465"><span class="var type1" id="S124T48U8026">Ca</span>.CancerYear</span>(<span class="var type1" id="S136T1U8028">z</span>, <span class="mxinfo " id="T79:U468"><span class="mxinfo " id="T1:U469"><span class="var type1" id="S154T1U8031">f</span>+<span class="mxinfo " id="T1:U471">1</span></span>:<span class="mxinfo " id="T1:U472"><span class="var type1" id="S159T1U8034">l</span>+<span class="mxinfo " id="T1:U474">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1409" id="srcline1409">1409</a></span><span class="line">        <span class="mxinfo " id="T87:U475"><span class="mxinfo " id="T87:U476"><span class="mxinfo " id="T47:U477"><span class="var type1" id="S124T48U8040">Ca</span>.CancerLocation</span>(<span class="var type1" id="S136T1U8042">z</span>, <span class="mxinfo " id="T79:U480"><span class="var type1" id="S154T1U8044">f</span>:<span class="var type1" id="S159T1U8045">l</span></span>)</span> = <span class="mxinfo " id="T87:U483"><span class="mxinfo " id="T47:U484"><span class="var type1" id="S124T48U8048">Ca</span>.CancerLocation</span>(<span class="var type1" id="S136T1U8050">z</span>, <span class="mxinfo " id="T79:U487"><span class="mxinfo " id="T1:U488"><span class="var type1" id="S154T1U8053">f</span>+<span class="mxinfo " id="T1:U490">1</span></span>:<span class="mxinfo " id="T1:U491"><span class="var type1" id="S159T1U8056">l</span>+<span class="mxinfo " id="T1:U493">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1410" id="srcline1410">1410</a></span><span class="line">        <span class="mxinfo " id="T87:U494"><span class="mxinfo " id="T87:U495"><span class="mxinfo " id="T47:U496"><span class="var type1" id="S124T48U8062">Ca</span>.DwellTime</span>(<span class="var type1" id="S136T1U8064">z</span>, <span class="mxinfo " id="T79:U499"><span class="var type1" id="S154T1U8066">f</span>:<span class="var type1" id="S159T1U8067">l</span></span>)</span> = <span class="mxinfo " id="T87:U502"><span class="mxinfo " id="T47:U503"><span class="var type1" id="S124T48U8070">Ca</span>.DwellTime</span>(<span class="var type1" id="S136T1U8072">z</span>, <span class="mxinfo " id="T79:U506"><span class="mxinfo " id="T1:U507"><span class="var type1" id="S154T1U8075">f</span>+<span class="mxinfo " id="T1:U509">1</span></span>:<span class="mxinfo " id="T1:U510"><span class="var type1" id="S159T1U8078">l</span>+<span class="mxinfo " id="T1:U512">1</span></span></span>)</span></span>; <span class="comment">% POSSIBLY DELETE</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1411" id="srcline1411">1411</a></span><span class="line">        <span class="mxinfo " id="T87:U513"><span class="mxinfo " id="T87:U514"><span class="mxinfo " id="T47:U515"><span class="var type1" id="S124T48U8084">Ca</span>.SympTime</span>(<span class="var type1" id="S136T1U8086">z</span>, <span class="mxinfo " id="T79:U518"><span class="var type1" id="S154T1U8088">f</span>:<span class="var type1" id="S159T1U8089">l</span></span>)</span>       = <span class="mxinfo " id="T87:U521"><span class="mxinfo " id="T47:U522"><span class="var type1" id="S124T48U8092">Ca</span>.SympTime</span>(<span class="var type1" id="S136T1U8094">z</span>, <span class="mxinfo " id="T79:U525"><span class="mxinfo " id="T1:U526"><span class="var type1" id="S154T1U8097">f</span>+<span class="mxinfo " id="T1:U528">1</span></span>:<span class="mxinfo " id="T1:U529"><span class="var type1" id="S159T1U8100">l</span>+<span class="mxinfo " id="T1:U531">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1412" id="srcline1412">1412</a></span><span class="line">        <span class="mxinfo " id="T87:U532"><span class="mxinfo " id="T87:U533"><span class="mxinfo " id="T47:U534"><span class="var type1" id="S124T48U8106">Ca</span>.SympStage</span>(<span class="var type1" id="S136T1U8108">z</span>, <span class="mxinfo " id="T79:U537"><span class="var type1" id="S154T1U8110">f</span>:<span class="var type1" id="S159T1U8111">l</span></span>)</span>      = <span class="mxinfo " id="T87:U540"><span class="mxinfo " id="T47:U541"><span class="var type1" id="S124T48U8114">Ca</span>.SympStage</span>(<span class="var type1" id="S136T1U8116">z</span>, <span class="mxinfo " id="T79:U544"><span class="mxinfo " id="T1:U545"><span class="var type1" id="S154T1U8119">f</span>+<span class="mxinfo " id="T1:U547">1</span></span>:<span class="mxinfo " id="T1:U548"><span class="var type1" id="S159T1U8122">l</span>+<span class="mxinfo " id="T1:U550">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1413" id="srcline1413">1413</a></span><span class="line">        <span class="mxinfo " id="T87:U551"><span class="mxinfo " id="T87:U552"><span class="mxinfo " id="T47:U553"><span class="var type1" id="S124T48U8128">Ca</span>.TimeStage_I</span>(<span class="var type1" id="S136T1U8130">z</span>, <span class="mxinfo " id="T79:U556"><span class="var type1" id="S154T1U8132">f</span>:<span class="var type1" id="S159T1U8133">l</span></span>)</span>    = <span class="mxinfo " id="T87:U559"><span class="mxinfo " id="T47:U560"><span class="var type1" id="S124T48U8136">Ca</span>.TimeStage_I</span>(<span class="var type1" id="S136T1U8138">z</span>, <span class="mxinfo " id="T79:U563"><span class="mxinfo " id="T1:U564"><span class="var type1" id="S154T1U8141">f</span>+<span class="mxinfo " id="T1:U566">1</span></span>:<span class="mxinfo " id="T1:U567"><span class="var type1" id="S159T1U8144">l</span>+<span class="mxinfo " id="T1:U569">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1414" id="srcline1414">1414</a></span><span class="line">        <span class="mxinfo " id="T87:U570"><span class="mxinfo " id="T87:U571"><span class="mxinfo " id="T47:U572"><span class="var type1" id="S124T48U8150">Ca</span>.TimeStage_II</span>(<span class="var type1" id="S136T1U8152">z</span>, <span class="mxinfo " id="T79:U575"><span class="var type1" id="S154T1U8154">f</span>:<span class="var type1" id="S159T1U8155">l</span></span>)</span>   = <span class="mxinfo " id="T87:U578"><span class="mxinfo " id="T47:U579"><span class="var type1" id="S124T48U8158">Ca</span>.TimeStage_II</span>(<span class="var type1" id="S136T1U8160">z</span>, <span class="mxinfo " id="T79:U582"><span class="mxinfo " id="T1:U583"><span class="var type1" id="S154T1U8163">f</span>+<span class="mxinfo " id="T1:U585">1</span></span>:<span class="mxinfo " id="T1:U586"><span class="var type1" id="S159T1U8166">l</span>+<span class="mxinfo " id="T1:U588">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1415" id="srcline1415">1415</a></span><span class="line">        <span class="mxinfo " id="T87:U589"><span class="mxinfo " id="T87:U590"><span class="mxinfo " id="T47:U591"><span class="var type1" id="S124T48U8172">Ca</span>.TimeStage_III</span>(<span class="var type1" id="S136T1U8174">z</span>, <span class="mxinfo " id="T79:U594"><span class="var type1" id="S154T1U8176">f</span>:<span class="var type1" id="S159T1U8177">l</span></span>)</span>  = <span class="mxinfo " id="T87:U597"><span class="mxinfo " id="T47:U598"><span class="var type1" id="S124T48U8180">Ca</span>.TimeStage_III</span>(<span class="var type1" id="S136T1U8182">z</span>, <span class="mxinfo " id="T79:U601"><span class="mxinfo " id="T1:U602"><span class="var type1" id="S154T1U8185">f</span>+<span class="mxinfo " id="T1:U604">1</span></span>:<span class="mxinfo " id="T1:U605"><span class="var type1" id="S159T1U8188">l</span>+<span class="mxinfo " id="T1:U607">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1416" id="srcline1416">1416</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,1417" id="srcline1417">1417</a></span><span class="line">        <span class="mxinfo " id="T1:U608"><span class="mxinfo " id="T1:U609"><span class="var type1" id="S129T8U8193">DiagnosedCancer</span>(<span class="var type1" id="S137T1U8194">y</span>, <span class="var type1" id="S136T1U8195">z</span>)</span>  = <span class="mxinfo " id="T1:U613">max(<span class="mxinfo " id="T1:U614"><span class="var type1" id="S129T8U8199">DiagnosedCancer</span>(<span class="var type1" id="S137T1U8200">y</span>, <span class="var type1" id="S136T1U8201">z</span>)</span>, <span class="var type1" id="S157T1U8202">Tumor</span>)</span></span>; <span class="comment">% max in case we would have found 2 tumors</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1418" id="srcline1418">1418</a></span><span class="line">        <span class="mxinfo " id="T1:U619"><span class="mxinfo " id="T1:U620"><span class="mxinfo " id="T2:U621"><span class="var type1" id="S132T3U8207">Last</span>.Cancer</span>(<span class="var type1" id="S136T1U8209">z</span>)</span>         = <span class="var type1" id="S137T1U8210">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1419" id="srcline1419">1419</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,1420" id="srcline1420">1420</a></span><span class="line">        <span class="keyword">switch</span> <span class="var type1" id="S139T43U8212">Modus</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1421" id="srcline1421">1421</a></span><span class="line">            <span class="keyword">case</span> <span class="string">'Scre'</span> <span class="comment">% Screening</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1422" id="srcline1422">1422</a></span><span class="line">                <span class="var type0" id="S168T0U8217">m</span>=1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1423" id="srcline1423">1423</a></span><span class="line">            <span class="keyword">case</span> <span class="string">'Symp'</span> <span class="comment">% Symptoms</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1424" id="srcline1424">1424</a></span><span class="line">                <span class="mxinfo " id="T1:U626"><span class="var type1" id="S168T1U8223">m</span>=<span class="mxinfo " id="T1:U628">2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1425" id="srcline1425">1425</a></span><span class="line">            <span class="keyword">case</span> <span class="string">'Foll'</span> <span class="comment">% Follow-up</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1426" id="srcline1426">1426</a></span><span class="line">                <span class="var type0" id="S168T0U8229">m</span>=3;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1427" id="srcline1427">1427</a></span><span class="line">            <span class="keyword">case</span> <span class="string">'Base'</span> <span class="comment">% Baseline</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1428" id="srcline1428">1428</a></span><span class="line">                <span class="var type0" id="S168T0U8235">m</span>=4;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1429" id="srcline1429">1429</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1430" id="srcline1430">1430</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1431" id="srcline1431">1431</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,1432" id="srcline1432">1432</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T28:U629">~<span class="mxinfo " id="T28:U630">isequal(<span class="var type1" id="S160T1U8242">StageTmp</span>, <span class="mxinfo " id="T1:U632">0</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1433" id="srcline1433">1433</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo " id="T28:U633"><span class="var type1" id="S160T1U8247">StageTmp</span> &gt; <span class="var type1" id="S161T1U8248">EStage</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1434" id="srcline1434">1434</a></span><span class="line">            <span class="mxinfo " id="T1:U636"><span class="var type1" id="S161T1U8251">EStage</span>     = <span class="var type1" id="S160T1U8252">StageTmp</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1435" id="srcline1435">1435</a></span><span class="line">            <span class="mxinfo " id="T1:U639"><span class="var type1" id="S162T1U8255">ELocation</span>  = <span class="var type1" id="S165T1U8256">LocationTmp</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1436" id="srcline1436">1436</a></span><span class="line">            <span class="mxinfo " id="T1:U642"><span class="var type1" id="S163T1U8259">ESojourn</span>   = <span class="var type1" id="S166T1U8260">SojournTmp</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1437" id="srcline1437">1437</a></span><span class="line">            <span class="mxinfo " id="T1:U645"><span class="var type1" id="S164T1U8263">EDwellTime</span> = <span class="var type1" id="S167T1U8264">DwellTimeTmp</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1438" id="srcline1438">1438</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1439" id="srcline1439">1439</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1440" id="srcline1440">1440</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1441" id="srcline1441">1441</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T28:U648">~<span class="mxinfo " id="T28:U649">isequal(<span class="var type1" id="S160T1U8270">StageTmp</span>, <span class="mxinfo " id="T1:U651">0</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1442" id="srcline1442">1442</a></span><span class="line">    <span class="mxinfo " id="T1:U652"><span class="var type1" id="S170T1U8274">pos</span> = <span class="mxinfo " id="T1:U654"><span class="mxinfo " id="T91:U655">length(<span class="mxinfo " id="T91:U656">find(<span class="mxinfo " id="T92:U657"><span class="mxinfo " id="T7:U658"><span class="var type1" id="S133T6U8282">TumorRecord</span>.Stage</span>(<span class="var type1" id="S137T1U8284">y</span>, <span class="mxinfo " id="T93:U661">:</span>)</span>)</span>)</span> + <span class="mxinfo " id="T1:U662">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1443" id="srcline1443">1443</a></span><span class="line">    <span class="mxinfo " id="T1:U663"><span class="mxinfo " id="T1:U664"><span class="mxinfo " id="T7:U665"><span class="var type1" id="S133T6U8291">TumorRecord</span>.Stage</span>(<span class="var type1" id="S137T1U8293">y</span>, <span class="var type1" id="S170T1U8294">pos</span>)</span>     = <span class="var type1" id="S161T1U8295">EStage</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1444" id="srcline1444">1444</a></span><span class="line">    <span class="mxinfo " id="T1:U670"><span class="mxinfo " id="T1:U671"><span class="mxinfo " id="T7:U672"><span class="var type1" id="S133T6U8300">TumorRecord</span>.Location</span>(<span class="var type1" id="S137T1U8302">y</span>, <span class="var type1" id="S170T1U8303">pos</span>)</span>  = <span class="var type1" id="S162T1U8304">ELocation</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1445" id="srcline1445">1445</a></span><span class="line">    <span class="mxinfo " id="T1:U677"><span class="mxinfo " id="T1:U678"><span class="mxinfo " id="T7:U679"><span class="var type1" id="S133T6U8309">TumorRecord</span>.DwellTime</span>(<span class="var type1" id="S137T1U8311">y</span>, <span class="var type1" id="S170T1U8312">pos</span>)</span> = <span class="var type1" id="S164T1U8313">EDwellTime</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1446" id="srcline1446">1446</a></span><span class="line">    <span class="mxinfo " id="T1:U684"><span class="mxinfo " id="T1:U685"><span class="mxinfo " id="T7:U686"><span class="var type1" id="S133T6U8318">TumorRecord</span>.Sojourn</span>(<span class="var type1" id="S137T1U8320">y</span>, <span class="var type1" id="S170T1U8321">pos</span>)</span>   = <span class="var type1" id="S163T1U8322">ESojourn</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1447" id="srcline1447">1447</a></span><span class="line">    <span class="mxinfo " id="T1:U691"><span class="mxinfo " id="T1:U692"><span class="mxinfo " id="T7:U693"><span class="var type1" id="S133T6U8327">TumorRecord</span>.Gender</span>(<span class="var type1" id="S137T1U8329">y</span>, <span class="var type1" id="S170T1U8330">pos</span>)</span>    = <span class="mxinfo " id="T1:U697"><span class="var type1" id="S140T2U8332">Gender</span>(<span class="var type1" id="S136T1U8333">z</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1448" id="srcline1448">1448</a></span><span class="line">    <span class="mxinfo " id="T1:U700"><span class="mxinfo " id="T1:U701"><span class="mxinfo " id="T7:U702"><span class="var type1" id="S133T6U8338">TumorRecord</span>.Detection</span>(<span class="var type1" id="S137T1U8340">y</span>, <span class="var type1" id="S170T1U8341">pos</span>)</span> = <span class="var type1" id="S168T1U8342">m</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1449" id="srcline1449">1449</a></span><span class="line">    <span class="mxinfo " id="T1:U707"><span class="mxinfo " id="T1:U708"><span class="mxinfo " id="T7:U709"><span class="var type1" id="S133T6U8347">TumorRecord</span>.PatientNumber</span>(<span class="var type1" id="S137T1U8349">y</span>, <span class="var type1" id="S170T1U8350">pos</span>)</span> = <span class="var type1" id="S136T1U8351">z</span></span>; <span class="comment">% RS ONLY !!!!!!</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1450" id="srcline1450">1450</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1451" id="srcline1451">1451</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1452" id="srcline1452">1452</a></span><span class="line"><span class="mxinfo " id="T1:U714"><span class="mxinfo " id="T1:U715"><span class="mxinfo " id="T2:U716"><span class="var type1" id="S132T3U8356">Last</span>.Colonoscopy</span>(<span class="var type1" id="S136T1U8358">z</span>)</span> = <span class="var type1" id="S137T1U8359">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1453" id="srcline1453">1453</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1454" id="srcline1454">1454</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T28:U720">isequal(<span class="var type1" id="S153T1U8364">counter</span>, <span class="mxinfo " id="T1:U722">0</span>)</span> <span class="comment">% in this case no tumor or polyp</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1455" id="srcline1455">1455</a></span><span class="line">    <span class="mxinfo " id="T1:U723"><span class="var type1" id="S172T1U8368">factor</span> = <span class="mxinfo " id="T1:U725">0.75</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1456" id="srcline1456">1456</a></span><span class="line">    <span class="mxinfo " id="T1:U726"><span class="var type1" id="S173T1U8372">moneyspent</span> = <span class="mxinfo " id="T1:U728"><span class="var type1" id="S142T23U8374">Cost</span>.Colonoscopy</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1457" id="srcline1457">1457</a></span><span class="line">    <span class="mxinfo " id="T1:U730"><span class="mxinfo " id="T1:U731"><span class="mxinfo " id="T11:U732"><span class="var type1" id="S134T10U8380">PaymentType</span>.Colonoscopy</span>(<span class="var type1" id="S168T1U8382">m</span>,<span class="var type1" id="S137T1U8383">y</span>)</span> = <span class="mxinfo " id="T1:U736"><span class="mxinfo " id="T1:U737"><span class="mxinfo " id="T11:U738"><span class="var type1" id="S134T10U8387">PaymentType</span>.Colonoscopy</span>(<span class="var type1" id="S168T1U8389">m</span>,<span class="var type1" id="S137T1U8390">y</span>)</span> + <span class="mxinfo " id="T1:U742">1</span></span></span> ; </span></span>
<span class="srcline"><span class="lineno"><a href="1,1458" id="srcline1458">1458</a></span><span class="line">    <span class="comment">% AllCost(y) = AllCost(y) + Cost.Colonoscopy;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1459" id="srcline1459">1459</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T28:U743">isequal(<span class="var type1" id="S153T1U8395">counter</span>, <span class="mxinfo " id="T1:U745">-1</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1460" id="srcline1460">1460</a></span><span class="line">    <span class="mxinfo " id="T1:U746"><span class="var type1" id="S172T1U8400">factor</span> = <span class="mxinfo " id="T1:U748">1.5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1461" id="srcline1461">1461</a></span><span class="line">    <span class="mxinfo " id="T1:U749"><span class="var type1" id="S173T1U8404">moneyspent</span> = <span class="mxinfo " id="T1:U751"><span class="var type1" id="S142T23U8406">Cost</span>.Colonoscopy_Cancer</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1462" id="srcline1462">1462</a></span><span class="line">    <span class="mxinfo " id="T1:U753"><span class="mxinfo " id="T1:U754"><span class="mxinfo " id="T11:U755"><span class="var type1" id="S134T10U8412">PaymentType</span>.Colonoscopy_Cancer</span>(<span class="var type1" id="S168T1U8414">m</span>,<span class="var type1" id="S137T1U8415">y</span>)</span> = <span class="mxinfo " id="T1:U759"><span class="mxinfo " id="T1:U760"><span class="mxinfo " id="T11:U761"><span class="var type1" id="S134T10U8419">PaymentType</span>.Colonoscopy_Cancer</span>(<span class="var type1" id="S168T1U8421">m</span>,<span class="var type1" id="S137T1U8422">y</span>)</span> + <span class="mxinfo " id="T1:U765">1</span></span></span> ; </span></span>
<span class="srcline"><span class="lineno"><a href="1,1463" id="srcline1463">1463</a></span><span class="line">    <span class="comment">% AllCost(y) = AllCost(y) + Cost.Colonoscopy_Polyp;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1464" id="srcline1464">1464</a></span><span class="line"><span class="keyword">else</span> </span></span>
<span class="srcline"><span class="lineno"><a href="1,1465" id="srcline1465">1465</a></span><span class="line">    <span class="mxinfo " id="T1:U766"><span class="var type1" id="S172T1U8427">factor</span> = <span class="mxinfo " id="T1:U768">1.5</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1466" id="srcline1466">1466</a></span><span class="line">    <span class="mxinfo " id="T1:U769"><span class="var type1" id="S173T1U8431">moneyspent</span> = <span class="mxinfo " id="T1:U771"><span class="var type1" id="S142T23U8433">Cost</span>.Colonoscopy_Polyp</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1467" id="srcline1467">1467</a></span><span class="line">    <span class="mxinfo " id="T1:U773"><span class="mxinfo " id="T1:U774"><span class="mxinfo " id="T11:U775"><span class="var type1" id="S134T10U8439">PaymentType</span>.ColonoscopyPolyp</span>(<span class="var type1" id="S168T1U8441">m</span>,<span class="var type1" id="S137T1U8442">y</span>)</span> = <span class="mxinfo " id="T1:U779"><span class="mxinfo " id="T1:U780"><span class="mxinfo " id="T11:U781"><span class="var type1" id="S134T10U8446">PaymentType</span>.ColonoscopyPolyp</span>(<span class="var type1" id="S168T1U8448">m</span>,<span class="var type1" id="S137T1U8449">y</span>)</span> + <span class="mxinfo " id="T1:U785">1</span></span></span> ; </span></span>
<span class="srcline"><span class="lineno"><a href="1,1468" id="srcline1468">1468</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1469" id="srcline1469">1469</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1470" id="srcline1470">1470</a></span><span class="line"><span class="comment">%%%% Complications</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1471" id="srcline1471">1471</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T28:U786"><span class="mxinfo " id="T1:U787">rand</span> &lt; <span class="mxinfo " id="T1:U788"><span class="mxinfo " id="T1:U789"><span class="var type1" id="S144T26U8458">risc</span>.Colonoscopy_RiscPerforation</span>             * <span class="var type1" id="S172T1U8460">factor</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1472" id="srcline1472">1472</a></span><span class="line">    <span class="comment">% a perforation happend</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1473" id="srcline1473">1473</a></span><span class="line">    <span class="mxinfo " id="T1:U792"><span class="var type1" id="S173T1U8463">moneyspent</span> = <span class="mxinfo " id="T1:U794"><span class="var type1" id="S173T1U8465">moneyspent</span> + <span class="mxinfo " id="T1:U796"><span class="var type1" id="S142T23U8467">Cost</span>.Colonoscopy_Perforation</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1474" id="srcline1474">1474</a></span><span class="line">    <span class="mxinfo " id="T1:U798"><span class="mxinfo " id="T1:U799"><span class="mxinfo " id="T11:U800"><span class="var type1" id="S134T10U8473">PaymentType</span>.Perforation</span>(<span class="var type1" id="S168T1U8475">m</span>,<span class="var type1" id="S137T1U8476">y</span>)</span> = <span class="mxinfo " id="T1:U804"><span class="mxinfo " id="T1:U805"><span class="mxinfo " id="T11:U806"><span class="var type1" id="S134T10U8480">PaymentType</span>.Perforation</span>(<span class="var type1" id="S168T1U8482">m</span>,<span class="var type1" id="S137T1U8483">y</span>)</span> + <span class="mxinfo " id="T1:U810">1</span></span></span> ; </span></span>
<span class="srcline"><span class="lineno"><a href="1,1475" id="srcline1475">1475</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T28:U811"><span class="mxinfo " id="T1:U812">rand</span> &lt; <span class="mxinfo " id="T1:U813"><span class="var type1" id="S144T26U8491">risc</span>.DeathPerforation</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1476" id="srcline1476">1476</a></span><span class="line">        <span class="comment">% patient died during colonoscopy from a perforation</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1477" id="srcline1477">1477</a></span><span class="line">        <span class="mxinfo " id="T28:U815"><span class="mxinfo " id="T28:U816"><span class="var type1" id="S126T44U8496">Included</span>(<span class="var type1" id="S136T1U8497">z</span>)</span>  = <span class="mxinfo " id="T28:U819">false</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1478" id="srcline1478">1478</a></span><span class="line">        <span class="mxinfo " id="T1:U820"><span class="mxinfo " id="T1:U821"><span class="var type1" id="S127T2U8503">DeathCause</span>(<span class="var type1" id="S136T1U8504">z</span>)</span>= <span class="mxinfo " id="T1:U824">3</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1479" id="srcline1479">1479</a></span><span class="line">        <span class="mxinfo " id="T1:U825"><span class="mxinfo " id="T1:U826"><span class="var type1" id="S128T2U8509">DeathYear</span>(<span class="var type1" id="S136T1U8510">z</span>)</span> = <span class="var type1" id="S137T1U8511">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1480" id="srcline1480">1480</a></span><span class="line">        <span class="comment">% we add the costs</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1481" id="srcline1481">1481</a></span><span class="line">        [<span class="var type1" id="S135T15U8515">Money</span>, <span class="var type1" id="S134T10U8516">PaymentType</span>] = <span class="fcn" id="F259N3:B8518">AddCosts</span>(<span class="var type1" id="S125T50U8519">Detected</span>, <span class="var type1" id="S147T24U8520">CostStage</span>, <span class="var type1" id="S134T10U8521">PaymentType</span>, <span class="var type1" id="S135T15U8522">Money</span>, <span class="mxinfo " id="T1:U836"><span class="var type1" id="S137T1U8524">y</span>+<span class="mxinfo " id="T1:U838">(<span class="mxinfo " id="T1:U839"><span class="var type1" id="S138T1U8528">q</span>-<span class="mxinfo " id="T1:U841">1</span></span>)/<span class="mxinfo " id="T1:U842">4</span></span></span>, <span class="var type1" id="S136T1U8531">z</span>, <span class="string">'oc'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,1482" id="srcline1482">1482</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1483" id="srcline1483">1483</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T28:U844"><span class="mxinfo " id="T1:U845">rand</span> &lt; <span class="mxinfo " id="T1:U846"><span class="mxinfo " id="T1:U847"><span class="var type1" id="S144T26U8539">risc</span>.Colonoscopy_RiscSerosaBurn</span>          * <span class="var type1" id="S172T1U8541">factor</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1484" id="srcline1484">1484</a></span><span class="line">    <span class="comment">% serosal burn</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1485" id="srcline1485">1485</a></span><span class="line">    <span class="mxinfo " id="T1:U850"><span class="var type1" id="S173T1U8544">moneyspent</span> = <span class="mxinfo " id="T1:U852"><span class="var type1" id="S173T1U8546">moneyspent</span> + <span class="mxinfo " id="T1:U854"><span class="var type1" id="S142T23U8548">Cost</span>.Colonoscopy_Serosal_burn</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1486" id="srcline1486">1486</a></span><span class="line">    <span class="mxinfo " id="T1:U856"><span class="mxinfo " id="T1:U857"><span class="mxinfo " id="T11:U858"><span class="var type1" id="S134T10U8554">PaymentType</span>.Serosa</span>(<span class="var type1" id="S168T1U8556">m</span>,<span class="var type1" id="S137T1U8557">y</span>)</span> = <span class="mxinfo " id="T1:U862"><span class="mxinfo " id="T1:U863"><span class="mxinfo " id="T11:U864"><span class="var type1" id="S134T10U8561">PaymentType</span>.Serosa</span>(<span class="var type1" id="S168T1U8563">m</span>,<span class="var type1" id="S137T1U8564">y</span>)</span> + <span class="mxinfo " id="T1:U868">1</span></span></span> ; </span></span>
<span class="srcline"><span class="lineno"><a href="1,1487" id="srcline1487">1487</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T28:U869"><span class="mxinfo " id="T1:U870">rand</span> &lt; <span class="mxinfo " id="T1:U871"><span class="mxinfo " id="T1:U872"><span class="var type1" id="S144T26U8572">risc</span>.Colonoscopy_RiscBleeding</span>            * <span class="var type1" id="S172T1U8574">factor</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1488" id="srcline1488">1488</a></span><span class="line">    <span class="comment">% a bleeding episode (no transfusion)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1489" id="srcline1489">1489</a></span><span class="line">    <span class="mxinfo " id="T1:U875"><span class="var type1" id="S173T1U8577">moneyspent</span> = <span class="mxinfo " id="T1:U877"><span class="var type1" id="S173T1U8579">moneyspent</span> + <span class="mxinfo " id="T1:U879"><span class="var type1" id="S142T23U8581">Cost</span>.Colonoscopy_bleed</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1490" id="srcline1490">1490</a></span><span class="line">    <span class="mxinfo " id="T1:U881"><span class="mxinfo " id="T1:U882"><span class="mxinfo " id="T11:U883"><span class="var type1" id="S134T10U8587">PaymentType</span>.Bleeding</span>(<span class="var type1" id="S168T1U8589">m</span>,<span class="var type1" id="S137T1U8590">y</span>)</span> = <span class="mxinfo " id="T1:U887"><span class="mxinfo " id="T1:U888"><span class="mxinfo " id="T11:U889"><span class="var type1" id="S134T10U8594">PaymentType</span>.Bleeding</span>(<span class="var type1" id="S168T1U8596">m</span>,<span class="var type1" id="S137T1U8597">y</span>)</span> + <span class="mxinfo " id="T1:U893">1</span></span></span> ; </span></span>
<span class="srcline"><span class="lineno"><a href="1,1491" id="srcline1491">1491</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T28:U894"><span class="mxinfo " id="T1:U895">rand</span> &lt; <span class="mxinfo " id="T1:U896"><span class="mxinfo " id="T1:U897"><span class="var type1" id="S144T26U8605">risc</span>.Colonoscopy_RiscBleedingTransfusion</span> * <span class="var type1" id="S172T1U8607">factor</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1492" id="srcline1492">1492</a></span><span class="line">    <span class="comment">% bleeding recquiring transfusion</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1493" id="srcline1493">1493</a></span><span class="line">    <span class="mxinfo " id="T1:U900"><span class="var type1" id="S173T1U8610">moneyspent</span> = <span class="mxinfo " id="T1:U902"><span class="var type1" id="S173T1U8612">moneyspent</span> + <span class="mxinfo " id="T1:U904"><span class="var type1" id="S142T23U8614">Cost</span>.Colonoscopy_bleed_transfusion</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1494" id="srcline1494">1494</a></span><span class="line">    <span class="mxinfo " id="T1:U906"><span class="mxinfo " id="T1:U907"><span class="mxinfo " id="T11:U908"><span class="var type1" id="S134T10U8620">PaymentType</span>.BleedingTransf</span>(<span class="var type1" id="S168T1U8622">m</span>,<span class="var type1" id="S137T1U8623">y</span>)</span> = <span class="mxinfo " id="T1:U912"><span class="mxinfo " id="T1:U913"><span class="mxinfo " id="T11:U914"><span class="var type1" id="S134T10U8627">PaymentType</span>.BleedingTransf</span>(<span class="var type1" id="S168T1U8629">m</span>,<span class="var type1" id="S137T1U8630">y</span>)</span> + <span class="mxinfo " id="T1:U918">1</span></span></span> ; </span></span>
<span class="srcline"><span class="lineno"><a href="1,1495" id="srcline1495">1495</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T28:U919"><span class="mxinfo " id="T1:U920">rand</span> &lt; <span class="mxinfo " id="T1:U921"><span class="var type1" id="S144T26U8638">risc</span>.DeathBleedingTransfusion</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1496" id="srcline1496">1496</a></span><span class="line">        <span class="comment">% patient died during colonoscopy from a bleeding complication</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1497" id="srcline1497">1497</a></span><span class="line">        <span class="mxinfo " id="T28:U923"><span class="mxinfo " id="T28:U924"><span class="var type1" id="S126T44U8643">Included</span>(<span class="var type1" id="S136T1U8644">z</span>)</span>  = <span class="mxinfo " id="T28:U927">false</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1498" id="srcline1498">1498</a></span><span class="line">        <span class="mxinfo " id="T1:U928"><span class="mxinfo " id="T1:U929"><span class="var type1" id="S127T2U8650">DeathCause</span>(<span class="var type1" id="S136T1U8651">z</span>)</span>= <span class="mxinfo " id="T1:U932">3</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1499" id="srcline1499">1499</a></span><span class="line">        <span class="mxinfo " id="T1:U933"><span class="mxinfo " id="T1:U934"><span class="var type1" id="S128T2U8656">DeathYear</span>(<span class="var type1" id="S136T1U8657">z</span>)</span> = <span class="var type1" id="S137T1U8658">y</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1500" id="srcline1500">1500</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1501" id="srcline1501">1501</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1502" id="srcline1502">1502</a></span><span class="line"><span class="keyword">switch</span> <span class="var type1" id="S139T43U8660">Modus</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1503" id="srcline1503">1503</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'Scre'</span> <span class="comment">% Screening</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1504" id="srcline1504">1504</a></span><span class="line">        <span class="var type0" id="S135T0U8667">Money</span>.Screening(<span class="var type0" id="S137T0U8669">y</span>)    = <span class="var type0" id="S135T0U8673">Money</span>.Screening(<span class="var type0" id="S137T0U8675">y</span>) + <span class="var type0" id="S173T0U8676">moneyspent</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1505" id="srcline1505">1505</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'Symp'</span> <span class="comment">% Symptoms</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1506" id="srcline1506">1506</a></span><span class="line">        <span class="mxinfo " id="T1:U939"><span class="mxinfo " id="T1:U940"><span class="mxinfo " id="T16:U941"><span class="var type1" id="S135T15U8683">Money</span>.Treatment</span>(<span class="var type1" id="S137T1U8685">y</span>)</span>    = <span class="mxinfo " id="T1:U944"><span class="mxinfo " id="T1:U945"><span class="mxinfo " id="T16:U946"><span class="var type1" id="S135T15U8689">Money</span>.Treatment</span>(<span class="var type1" id="S137T1U8691">y</span>)</span> + <span class="var type1" id="S173T1U8692">moneyspent</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1507" id="srcline1507">1507</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'Foll'</span> <span class="comment">% Follow-up</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1508" id="srcline1508">1508</a></span><span class="line">        <span class="var type0" id="S135T0U8699">Money</span>.FollowUp(<span class="var type0" id="S137T0U8701">y</span>)     = <span class="var type0" id="S135T0U8705">Money</span>.FollowUp(<span class="var type0" id="S137T0U8707">y</span>) + <span class="var type0" id="S173T0U8708">moneyspent</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1509" id="srcline1509">1509</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'Base'</span> <span class="comment">% Baseline</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1510" id="srcline1510">1510</a></span><span class="line">        <span class="var type0" id="S135T0U8715">Money</span>.Other(<span class="var type0" id="S137T0U8717">y</span>)        = <span class="var type0" id="S135T0U8721">Money</span>.Other(<span class="var type0" id="S137T0U8723">y</span>) + <span class="var type0" id="S173T0U8724">moneyspent</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,1511" id="srcline1511">1511</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1512" id="srcline1512">1512</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1513" id="srcline1513">1513</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="1,1514" id="srcline1514">1514</a></span><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1515" id="srcline1515">1515</a></span><span class="line"><span class="comment">%%%         Rectosigmoidoscpy                         %%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1516" id="srcline1516">1516</a></span><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,1517" id="srcline1517">1517</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,1518" id="srcline1518">1518</a></span><span class="line"></span></span>
</pre>
